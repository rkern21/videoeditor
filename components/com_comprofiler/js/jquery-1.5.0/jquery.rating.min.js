/*
 ### jQuery Star Rating Plugin v2.5 - 2008-09-10 ###
 * http://www.fyneworks.com/ - diego@fyneworks.com
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 ###
 Project: http://plugins.jquery.com/project/MultipleFriendlyStarRating
 Website: http://www.fyneworks.com/jquery/star-rating/
*//*
	Based on http://www.phpletter.com/Demo/Jquery-Star-Rating-Plugin/
 Original comments:
	This is hacked version of star rating created by <a href="http://php.scripts.psu.edu/rja171/widgets/rating.php">Ritesh Agrawal</a>
	It thansform a set of radio type input elements to star rating type and remain the radio element name and value,
	so could be integrated with your form. It acts as a normal radio button.
	modified by : Logan Cai (cailongqun[at]yahoo.com.cn)
*//*# AVOID COLLISIONS #*/window.jQuery&&function(a){a.rating={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16,groups:{},event:{fill:function(b,c,d,e){this.drain(b),a(c).prevAll(".star_group_"+b).andSelf().addClass("star_"+(e||"hover"));var f=a(c).children("a");val=f.text(),d.focus&&d.focus.apply(a.rating.groups[b].valueElem[0],[val,f[0]])},drain:function(b,c,d){a.rating.groups[b].valueElem.siblings(".star_group_"+b).removeClass("star_on").removeClass("star_hover")},reset:function(b,c,d){a(a.rating.groups[b].current).is(".cancel")||a(a.rating.groups[b].current).prevAll(".star_group_"+b).andSelf().addClass("star_on");var e=a(c).children("a");val=e.text(),d.blur&&d.blur.apply(a.rating.groups[b].valueElem[0],[val,e[0]])},click:function(b,c,d){a.rating.groups[b].current=c;var e=a(c).children("a");val=e.text(),a.rating.groups[b].valueElem.val(val),a.rating.event.drain(b,c,d),a.rating.event.reset(b,c,d),d.callback&&d.callback.apply(a.rating.groups[b].valueElem[0],[val,e[0]])}}},a.fn.rating=function(b){if(this.length==0)return this;b=a.extend({},a.rating,b||{}),this.each(function(c){var d=a.extend({},b||{},(a.metadata?a(this).metadata():a.meta?a(this).data():null)||{}),e=a(this).parents("form").attr("name")+"___"+this.id+"_"+this.name;a.rating.groups[e]||(a.rating.groups[e]={count:0}),c=a.rating.groups[e].count,a.rating.groups[e].count++,a.rating.groups[e].readOnly=a.rating.groups[e].readOnly||d.readOnly||a(this).attr("disabled"),c==0&&(a.rating.groups[e].valueElem=a('<input type="hidden" name="'+this.name+'" value=""'+(d.readOnly?' disabled="disabled"':"")+"/>"),a(this).before(a.rating.groups[e].valueElem),!a.rating.groups[e].readOnly&&!d.required&&a(this).before(a('<div class="cancel"><a title="'+d.cancel+'">'+d.cancelValue+"</a></div>").mouseover(function(){a.rating.event.drain(e,this,d),a(this).addClass("star_on")}).mouseout(function(){a.rating.event.reset(e,this,d),a(this).removeClass("star_on")}).click(function(){a.rating.event.click(e,this,d)}))),eStar=a('<div class="star"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>"),a(this).after(eStar),d.half&&(d.split=2);if(typeof d.split=="number"&&d.split>0){var f=(a.fn.width?a(eStar).width():0)||d.starWidth,g=c%d.split,h=Math.floor(f/d.split);a(eStar).width(h).find("a").css({"margin-left":"-"+g*h+"px"})}a(eStar).addClass("star_group_"+e),a.rating.groups[e].readOnly?a(eStar).addClass("star_readonly"):a(eStar).addClass("star_live").mouseover(function(){a.rating.event.drain(e,this,d),a.rating.event.fill(e,this,d,"hover")}).mouseout(function(){a.rating.event.drain(e,this,d),a.rating.event.reset(e,this,d)}).click(function(){a.rating.event.click(e,this,d)}),this.checked&&(a.rating.groups[e].current=eStar),a(this).remove(),c+1==this.length&&a.rating.event.reset(e,this,d)});for(n in a.rating.groups)(function(c,d,e){c&&(a.rating.event.fill(e,c,b||{},"on"),a(d).val(a(c).children("a").text()))})(a.rating.groups[n].current,a.rating.groups[n].valueElem,n);return this}}(jQuery)